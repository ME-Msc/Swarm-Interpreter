Port : 41451

Action takeOff_Action(){
	:= takeOff_API();
}

Action flyToHeight_Action(h){
	:= flyToHeight_API(h);
}

Action getPosition_Action(){
    pos := getPositon_API();
    return pos;
}

Action getNextDestination_Action(pos){
    dest := getNextDestination_API(pos);
    return dest;
}

Action flyTo_Action(dest){
    := flyTo_API(dest);
}

Agent search_uav {
	takeOff_Action, flyToHeight_Action, getPosition_Action, getNextDestination_Action, flyTo_Action;
}

Behavior takeOff_Behavior() {
	@init{}
	@goal{}
	@routine{
		takeOff_Action();
	}
}

Behavior search_Behavior(){
	@init{
        step = 0;
		flyToHeight_Action(50);
    }
	@goal{
        $ step > 10
    }
	@routine{
        position = getPosition_Action();
        destination = getNextDestination_Action(position);
        flyTo_Action(destination);
        step = step + 1;
	}
}

Task search({agtC[stC~edC]}){
	@init{}
	@goal{}
	@routine{
		each agtC[stC~edC] {
            takeOff_Behavior();
			search_Behavior();
		}
	}
}

Main {
	Agent search_uav 3;
	search({search_uav[0~3]});
}