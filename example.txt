Port : 14457

Agent testUav():
    getGPS, flyTo

Action getGPS():
    gpsData := getGpsData() # call_RPC
    return gpsData

Action flyTo(position):
    step := nn_model(position) # call_RPC
    := fly(step)    # call_RPC

Behavior reach_Behavior():
    @stigmergy: <reachCount>
    @action: getGPS, flyTo
    @init:
        dest = "3, 3"
    @goal:
        loc = getGPS()
        dest == loc
    @routine:
        flyTo(dest)

Task reach_in_order_Task({typeA:countA}, target):
    @stigmergy: <reachCount>
    @init:
        put 0 to <reachCount>
    @goal:
        get rc from <reachCount>
        rc == target
    @behavior: 
    @routine:
        order typeA[0~countA]:
            reach_Behavior()
            get rc from <reachCount>
            put rc+1 to <reachCount>

Main :
    Agent testUav
    reach_in_order_Task({testUav:5}, 5)